\ProvidesPackage{marius2}
\RequirePackage{amsmath,amssymb,amsthm,mathtools}

% deklarer if-statements
\newif\ifmariussans\mariussansfalse
\newif\ifmariusnorsk\mariusnorsktrue
\newif\ifmariusoppgaveark\mariusoppgavearkfalse
\newif\ifmariuscolors\mariuscolorsfalse


% deklarer options
\DeclareOption{sans}{
	\mariussanstrue
}
\DeclareOption{english}{
	\mariusnorskfalse
}
\DeclareOption{oppgaveark}{
	\mariusoppgavearktrue
}
\DeclareOption{colors}{
	\mariuscolorstrue
}


% execute options sier hvilke options som er default:
\ExecuteOptions{}

%nå er vi ferdige med options processing:
\ProcessOptions\relax

%ferdiggjør pakke-options
\PassOptionsToPackage{dvipsnames}{xcolor}
\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc}
\RequirePackage{tikz}
\usetikzlibrary{arrows}
\RequirePackage{centernot}
\RequirePackage[a4paper]{geometry}

\ifmariussans
	\RequirePackage{cmbright}
\else
	\RequirePackage{lmodern}
\fi

\ifmariusnorsk
	\RequirePackage[norsk]{babel}
\else
	\RequirePackage[english]{babel}
\fi

\ifmariusnorsk
	\theoremstyle{plain}
        \newtheorem{theorem}{Teorem}[section]
		\newtheorem{lem}[theorem]{Lemma}
		\newtheorem{prop}[theorem]{Proposisjon}
    	\newtheorem{kor}[theorem]{Korollar}
    	\newtheorem*{theorem*}{Teorem}
		\newtheorem*{lem*}{Lemma}
		\newtheorem*{prop*}{Proposisjon}
    	\newtheorem*{kor*}{Korollar}
	\theoremstyle{definition}
		\newtheorem{defi}[theorem]{Definisjon}
		\newtheorem{beme}[theorem]{Bemerkning}
		\newtheorem{opp}{Oppgave}
			%\@addtoreset{opp}{section}
			%\@addtoreset{opp}{part}
			%\@addtoreset{opp}{theorem}
			%\renewcommand{\theopp}{\arabic{opp}}
		\newtheorem{olem}{Lemma}
		\newtheorem{case}{Case}
		\newtheorem{prob}[opp]{Problem}
		\newtheorem{partialp}{Fremgang}
		\newtheorem{konstr}{Konstruksjon}
		\newtheorem*{defi*}{Definisjon}
		\newtheorem*{beme*}{Bemerkning}
		\newtheorem*{kom*}{Kommentar}
		\newtheorem*{opp*}{Oppgave}
		\newtheorem*{prob*}{Problem}
		\newtheorem*{refo*}{Reformulering}
		\newtheorem*{intu*}{Intuisjon}
		\newtheorem*{spoer*}{Spørsmål}
		\newtheorem*{partialp*}{Fremgang}
		\newtheorem*{konstr*}{Konstruksjon}
		\newtheorem*{paas*}{Påstand}
		\newtheorem*{oppv*}{Oppvarming}
\else
\theoremstyle{plain}
        \newtheorem{theorem}{Theorem}[section]
		\newtheorem{lem}[theorem]{Lemma}
		\newtheorem{prop}[theorem]{Proposition}
    	\newtheorem{kor}[theorem]{Corollary}
		\newtheorem{conj}[theorem]{Conjecture}
    	\newtheorem*{theorem*}{Theorem}
		\newtheorem*{lem*}{Lemma}
		\newtheorem*{prop*}{Proposition}
    	\newtheorem*{kor*}{Corollary}
	\theoremstyle{definition}
		\newtheorem{defi}[theorem]{Definition}
		\newtheorem{beme}[theorem]{Remark}
		\newtheorem{fact}[theorem]{Fact}
		\newtheorem{opp}{Problem}
			\@addtoreset{opp}{section}
			\@addtoreset{opp}{part}
			\@addtoreset{opp}{theorem}
			\renewcommand{\theopp}{\arabic{opp}}
		\newtheorem{olem}{Lemma}
		\newtheorem{case}{Case}
		\newtheorem{partialp}{Partial progress}
		\newtheorem{konstr}{Construction}
		\newtheorem{prob}[opp]{Problem}
		\newtheorem*{defi*}{Definition}
		\newtheorem*{beme*}{Remark}
		\newtheorem*{kom*}{Comment}
		\newtheorem*{opp*}{Excercise}
		\newtheorem*{prob*}{Problem}
		\newtheorem*{refo*}{Recast}
		\newtheorem*{intu*}{Intuition}
		\newtheorem*{moti*}{Motivation}
		\newtheorem*{fact*}{Fact}
		\newtheorem*{partialp*}{Partial progress}
		\newtheorem*{konstr*}{Construction}
		\newtheorem*{spoer*}{Question}
		\newtheorem*{paas*}{Claim}
\fi

\ifmariusnorsk
	\newenvironment{loes}{\begin{proof}[Løsning]}{\end{proof}}
	\newenvironment{intu}{\begin{proof}[Intuisjon]}{\end{proof}}
\else
	\newenvironment{loes}{\begin{proof}[Solution]}{\end{proof}}
	\newenvironment{intu}{\begin{proof}[Intuition]}{\end{proof}}
\fi



%custom stuff:
\author{Marius Stensrud}
\setlength\parindent{0pt}

\newcommand{\eps}{\varepsilon}
\newcommand{\defeq}{\stackrel{\rm{def}}{=}}
\newcommand{\xeq}[1]{\stackrel{#1}{=}}
\newcommand{\mangle}{\measuredangle}
\newcommand{\xto}[1]{\xrightarrow{#1}}
\newcommand{\ol}[1]{\overline{#1}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\PR}{\mathbb{P}}
\newcommand{\NN}{\mathbf{N}}
\newcommand{\RR}{\mathbf{R}}
\newcommand{\QQ}{\mathbf{Q}}
\newcommand{\CC}{\mathbf{C}}
\newcommand{\ZZ}{\mathbf{Z}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\nequiv}{\centernot\equiv}
\newcommand{\nrml}{\mathrel{\unlhd}}
\newcommand{\fet}[1]{\mathbf{#1}}
\newcommand{\cycsum}{\sum_{\rm{cyc}}}
\newcommand{\symsum}{\sum_{\rm{sym}}}
\newcommand{\cycprod}{\prod_{cyc}}
\newcommand{\symprod}{\prod_{sym}}
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Pow}{Pow}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\vspan}{span}
\DeclareMathOperator{\cl}{cl}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\FixPt}{FixPt}
\DeclareMathOperator{\sgn}{sgn}
\newcommand*\diff{\mathop{}\!\mathrm{d}}
\newcommand*\Diff[1]{\mathop{}\!\mathrm{d^#1}}
\renewcommand{\dfrac}[2]{\frac{\diff #1}{\diff #2}}
\DeclareRobustCommand*\cal{\@fontswitch\relax\mathcal}

\delimitershortfall-1sp

\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright}

\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\parr}[1]{\left( #1 \right)}
\newcommand{\geng}[1]{\left\langle #1 \right\rangle}
\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\sbra}[1]{\left[ #1 \right]}

\renewcommand{\qedsymbol}{$\blacksquare$}

\newenvironment{proof2}{
\renewcommand{\qedsymbol}{$\square$}
\begin{proof}
}
{
\end{proof}
\renewcommand{\qedsymbol}{$\blacksquare$}
}

\newenvironment{enumeratea}{%
\renewcommand{\theenumi}{\alph{enumi}}
\begin{enumerate}
}
{
\end{enumerate}
\renewcommand{\theenumi}{\arabic{enumi}}
}

\newenvironment{enumerater}{%
\renewcommand{\theenumi}{\roman{enumi}}
\begin{enumerate}
}
{
\end{enumerate}
\renewcommand{\theenumi}{\arabic{enumi}}
}

\newenvironment{del}{
\renewcommand{\qedsymbol}{}
}
{

}
	

\RequirePackage{etoolbox}
\AfterEndEnvironment{opp}{
\setcounter{olem}{0}
\setcounter{case}{0}
\setcounter{partialp}{0}
\setcounter{konstr}{0}
}
\AfterEndEnvironment{prob}{
\setcounter{olem}{0}
\setcounter{case}{0}
\setcounter{partialp}{0}
\setcounter{konstr}{0}
}
\AfterEndEnvironment{theorem}{
\setcounter{olem}{0}
\setcounter{case}{0}
\setcounter{partialp}{0}
\setcounter{konstr}{0}
}

\RequirePackage{graphicx}
\newcommand{\bilde}[2]{\begin{figure}[h]
\includegraphics[#1]{#2}
\end{figure}}

\RequirePackage{epigraph}

% \epigraphsize{\small}% Default
\setlength\epigraphwidth{8cm}
\setlength\epigraphrule{0pt}
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}






\RequirePackage{hyperref}
\hypersetup{colorlinks = true}
\definecolor{url}{HTML}{1f7bca}
\definecolor{cite}{HTML}{7bca1f}
\ifmariuscolors
	\hypersetup{
    	linkbordercolor = {white},
    	linkcolor = {magenta},
    	citecolor =  {cite},
    	urlcolor = {url},
	}
\else
	\hypersetup{allcolors = MidnightBlue, }
\fi
