\ProvidesPackage{marius5}
\RequirePackage{amsmath,amssymb,amsthm,mathtools}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% A package mainly for typesetting mathematical notes. Language: English
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% deklarer if-statements
\newif\ifmariusfancy\mariusfancytrue

% deklarer options
\DeclareOption{plain}{
	\mariusfancyfalse
}

% execute options sier hvilke options som er default:
\ExecuteOptions{}

% done with options processing:
\ProcessOptions\relax

% installing common packages
\PassOptionsToPackage{dvipsnames, table}{xcolor}
\PassOptionsToPackage{table}{xcolor}
\RequirePackage[T1]{fontenc}
\RequirePackage[utf8]{inputenc}
\RequirePackage{tikz}
	\usetikzlibrary{arrows,shapes,positioning}
\RequirePackage{tikz-cd} %% for commutative diagrams
\RequirePackage{centernot}
\RequirePackage[a4paper]{geometry}
\RequirePackage{lmodern}
\RequirePackage{bbm} % for extended blackboard font
\RequirePackage{bm} % for better bold math
\renewcommand{\mathbf}[1]{\bm{{#1}}}
\RequirePackage{stmaryrd} % for \mapsfrom
\RequirePackage{mathrsfs}
\RequirePackage{float}
\RequirePackage[english]{babel}

\ifmariusfancy
\RequirePackage{fancyhdr}
	\pagestyle{fancy}
	\fancyhead{}
	\fancyhead[R]{}
	\fancyhead[L]{\leftmark}
\fi

%%%%%%%%%%%%%%%%%%% Theorems
\theoremstyle{definition}
	\newtheorem{fact}{Fact}[section]
	\newtheorem{problem}{Problem}[section]
	\newtheorem{exercise}[problem]{Exercise}
	\newtheorem{smalllemma}[fact]{Lemma}
	\newtheorem{smallproposition}[fact]{Proposition}
	\newtheorem{smalltheorem}[fact]{Theorem}
	\newtheorem{smallcorollary}[fact]{Corollary}
	\newtheorem{smalldefinition}[fact]{Definition}
	\newtheorem*{smalllemma*}{Lemma}
	\newtheorem*{smallproposition*}{Proposition}
	\newtheorem*{smalltheorem*}{Theorem}
	\newtheorem*{smallcorollary*}{Corollary}
	\newtheorem*{smalldefinition*}{Definition}
	\newtheorem{case}{Case}
	\newtheorem*{remark}{Remark}
	\newtheorem*{komment}{Comment}
	\newtheorem*{intuition}{Intuition}
	\newtheorem*{motivation}{Motivation}
	\newtheorem*{partialprogress}{Partial progress}
	\newtheorem{question}{Question}
	\newtheorem*{claim}{Claim}
	\newtheorem*{problem*}{Problem}
	\newtheorem*{conjecture}{Conjecture}
	\newtheorem*{inductive_step}{Inductive step}
	\newtheorem*{base_case}{Base case}

\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}
\newenvironment{construction}{\begin{proof}[Construction]}{\end{proof}}
\newenvironment{sketch}{\begin{proof}[Sketch]}{\end{proof}}

\usepackage{tcolorbox}
\tcbuselibrary{theorems}
\tcbuselibrary{skins}

\newtcbtheorem[use counter=fact, number within=section]{theorem}{Theorem}{
	theorem style=plain apart,
	enhanced,
	frame hidden,
	colframe=blue!27!black,
	titlerule=0mm,
	toptitle=1mm,
	bottomtitle=1mm,
	fonttitle=\bfseries\large,
	description font=\mdseries,
	fontupper=\itshape,
	coltitle=blue!27!black,
	colbacktitle=blue!15!white,
	colback=blue!5!white,
	}{th}

\newtcbtheorem[use counter=fact, number within=section]{lemma}{Lemma}{
	theorem style=plain apart,
	label type=theorem,
	enhanced,
	frame hidden,
	titlerule=0mm,
	toptitle=1mm,
	bottomtitle=1mm,
	fonttitle=\bfseries\large,
	description font=\mdseries,
	fontupper=\itshape,
	coltitle=green!27!black,
	colbacktitle=green!15!white,
	colback=green!5!white,
	}{lem}
	
\newtcbtheorem[use counter=fact, number within=section]{proposition}{Proposition}{
	theorem style=plain apart,
	enhanced,
	frame hidden,
	titlerule=0mm,
	toptitle=1mm,
	bottomtitle=1mm,
	fonttitle=\bfseries\large,
	description font=\mdseries,
	fontupper=\normalsize,
	coltitle=red!27!black,
	colbacktitle=red!15!white,
	colback=red!5!white,
	}{prop}
	
\newtcbtheorem[use counter=fact, number within=section]{corollary}{Corollary}{
	theorem style=plain apart,
	enhanced,
	frame hidden,
	titlerule=0mm,
	toptitle=1mm,
	bottomtitle=1mm,
	fonttitle=\bfseries\large,
	description font=\mdseries,
	fontupper=\normalsize,
	coltitle=red!27!black,
	colbacktitle=red!15!white,
	colback=red!5!white,
	}{cor}
	
\newtcbtheorem[use counter=fact, number within=section]{definition}{Definition}{
	theorem style=plain,
	enhanced,
	frame hidden,
	%separator sign none,
	terminator sign none,
	titlerule=0mm,
	toptitle=1mm,
	bottomtitle=1mm,
	fonttitle=\bfseries\large,
	description font=\mdseries,
	fontupper=\normalsize,
	coltitle=black!85,
	colbacktitle=black!15,
	colback=black!5,
	}{def}
	
\newtcolorbox{example}{
	frame hidden,
	colframe=white,
	}
	
\newtcolorbox{important}{
	frame hidden,
	colframe=white,
	colback=yellow!50,
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%custom stuff:
\author{Marius Stensrud}
\setlength\parindent{0pt}

%%% one letter: bb, two letters: bf, cal takes a c in front of letter
\newcommand{\s }{\subseteq}
\newcommand{\eps}{\varepsilon}
\newcommand{\defeq}{\stackrel{\rm{def}}{=}}
\newcommand{\xeq}[1]{\stackrel{#1}{=}}
\newcommand{\mangle}{\measuredangle}
\newcommand{\xto}[1]{\xrightarrow{#1}}
\newcommand{\xdashrightarrow}[1]{\stackrel{#1}{\dashrightarrow}}
\newcommand{\ol}[1]{\overline{#1}}

\newcommand{\N}{\mathbb{N}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Rd}{{\mathbb{R}^d}}
\newcommand{\Rn}{{\mathbb{R}^n}}
\newcommand{\Rm}{{\mathbb{R}^m}}
\newcommand{\Rk}{{\mathbb{R}^k}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\E}{\mathbb{E}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\PR}{\mathbb{P}}
\newcommand{\T}{\mathbb{T}}
\newcommand{\V}{\mathbb{V}}

\newcommand{\bfA}{\mathbf{A}}
\newcommand{\BB}{\mathbf{B}}
\newcommand{\CC}{\mathbf{C}}
\newcommand{\DD}{\mathbf{D}}
\newcommand{\EE}{\mathbf{E}}
\newcommand{\FF}{\mathbf{F}}
\newcommand{\GG}{\mathbf{G}}
\newcommand{\HH}{\mathbf{H}}
\newcommand{\II}{\mathbf{I}}
\newcommand{\JJ}{\mathbf{J}}
\newcommand{\KK}{\mathbf{K}}
\newcommand{\LL}{\mathbf{L}}
\newcommand{\MM}{\mathbf{M}}
\newcommand{\NN}{\mathbf{N}}
\newcommand{\OO}{\mathbf{O}}
\newcommand{\PP}{\mathbf{P}}
\newcommand{\QQ}{\mathbf{Q}}
\newcommand{\RR}{\mathbf{R}}
\newcommand{\bfS}{\mathbf{S}}
\newcommand{\TT}{\mathbf{T}}
\newcommand{\UU}{\mathbf{U}}
\newcommand{\VV}{\mathbf{V}}
\newcommand{\WW}{\mathbf{W}}
\newcommand{\XX}{\mathbf{X}}
\newcommand{\YY}{\mathbf{Y}}
\newcommand{\ZZ}{\mathbf{Z}}
\newcommand{\NP}{\mathbf{NP}}
%\newcommand{\CCC}{\mathbf{C}}


\newcommand{\cA}{\mathcal{A}}
\newcommand{\cB}{\mathcal{B}}
\newcommand{\cC}{\mathcal{C}}
\newcommand{\cD}{\mathcal{D}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cG}{\mathcal{G}}
\newcommand{\cH}{\mathcal{H}}
\newcommand{\cI}{\mathcal{I}}
\newcommand{\cJ}{\mathcal{J}}
\newcommand{\cK}{\mathcal{K}}
\newcommand{\cL}{\mathcal{L}}
\newcommand{\cM}{\mathcal{M}}
\newcommand{\cN}{\mathcal{N}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cP}{\mathcal{P}}
\newcommand{\cQ}{\mathcal{Q}}
\newcommand{\cR}{\mathcal{R}}
\newcommand{\cS}{\mathcal{S}}
\newcommand{\cT}{\mathcal{T}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\cV}{\mathcal{V}}
\newcommand{\cW}{\mathcal{W}}
\newcommand{\cX}{\mathcal{X}}
\newcommand{\cY}{\mathcal{Y}}
\newcommand{\cZ}{\mathcal{Z}}

\newcommand{\sA}{\mathscr{A}}
\newcommand{\sB}{\mathscr{B}}
\newcommand{\sC}{\mathscr{C}}
\newcommand{\sD}{\mathscr{D}}
\newcommand{\sE}{\mathscr{E}}
\newcommand{\sF}{\mathscr{F}}
\newcommand{\sG}{\mathscr{G}}
\newcommand{\sH}{\mathscr{H}}
\newcommand{\sI}{\mathscr{I}}
\newcommand{\sJ}{\mathscr{J}}
\newcommand{\sK}{\mathscr{K}}
\newcommand{\sL}{\mathscr{L}}
\newcommand{\sM}{\mathscr{M}}
\newcommand{\sN}{\mathscr{N}}
\newcommand{\sO}{\mathscr{O}}
\newcommand{\sP}{\mathscr{P}}
\newcommand{\sQ}{\mathscr{Q}}
\newcommand{\sR}{\mathscr{R}}
\newcommand{\sS}{\mathscr{S}}
\newcommand{\sT}{\mathscr{T}}
\newcommand{\sU}{\mathscr{U}}
\newcommand{\sV}{\mathscr{V}}
\newcommand{\sW}{\mathscr{W}}
\newcommand{\sX}{\mathscr{X}}
\newcommand{\sY}{\mathscr{Y}}
\newcommand{\sZ}{\mathscr{Z}}

\newcommand{\ii}{\mathbf{i}}
\newcommand{\jj}{\mathbf{j}}
\newcommand{\kk}{\mathbf{k}}
\newcommand{\ee}{\mathbf{e}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\cc}{\mathbf{c}}
\newcommand{\dd}{\mathbf{d}}

\newcommand{\nequiv}{\centernot\equiv}
\newcommand{\nrml}{\mathrel{\unlhd}}
\newcommand{\rnrml}{\mathrel{\unrhd}}
\newcommand{\fet}[1]{\mathbf{#1}}
\newcommand{\csum}{\sum_{\rm{cyc}}}
\newcommand{\ssum}{\sum_{\rm{sym}}}
\newcommand{\cprod}{\prod_{cyc}}
\newcommand{\sprod}{\prod_{sym}}
\newcommand{\inc}{\hookrightarrow}
\newcommand{\xlongmapsto}[1]{\stackrel{#1}{\longmapsto}}
\newcommand{\xor}{\oplus}
\newcommand{\void}{\hspace{0pt}}

\DeclareMathOperator{\ex}{ex}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\disc}{disc}
\DeclareMathOperator{\hcf}{hcf}
\DeclareMathOperator{\graph}{graph}
\DeclareMathOperator{\Geo}{Geo}
\DeclareMathOperator{\Log}{Log}
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Pow}{Pow}
\DeclareMathOperator{\On}{On}
\DeclareMathOperator{\Ima}{Im}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Cov}{Cov}
\DeclareMathOperator{\spann}{span}
\DeclareMathOperator{\Null}{Null}
%\DeclareMathOperator{\Char}{Char}
\DeclareMathOperator{\Hom}{Hom}
\DeclareMathOperator{\Mat}{Mat}
\DeclareMathOperator{\Bil}{Bil}
\DeclareMathOperator{\Frac}{Frac}
\DeclareMathOperator{\Cl}{Cl}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\Orb}{Orb}
\DeclareMathOperator{\ccl}{ccl}
\DeclareMathOperator{\FixPt}{FixPt}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\Isom}{Isom}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\GL}{GL}
\DeclareMathOperator{\PGL}{PGL}
\DeclareMathOperator{\SL}{SL}
\DeclareMathOperator{\SO}{SO}
\DeclareMathOperator{\GF}{GF}
\DeclareMathOperator{\FS}{FS}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Syl}{Syl}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\osc}{osc}
\DeclareMathOperator{\bias}{bias}
\DeclareMathOperator{\Binomial}{Binomial}
\DeclareMathOperator{\Poisson}{Poisson}
\DeclareMathOperator{\like}{like}
\DeclareMathOperator{\loglike}{loglike}
\DeclareMathOperator{\MSE}{MSE}
\DeclareMathOperator{\MLE}{MLE}
\DeclareMathOperator{\mesh}{mesh}
\DeclareMathOperator*{\essup}{ess\, sup}
\DeclareMathOperator{\Gal}{Gal}
\DeclareMathOperator{\Root}{Root}
\DeclareMathOperator{\cchar}{char}
\DeclareMathOperator{\Fr}{Fr}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\card}{card}
\newcommand{\1}{\mathbbm{1}}
\newcommand{\grad}{\nabla}
\newcommand{\dx}{\mathop{dx}}
\newcommand{\dy}{\mathop{dy}}
\newcommand{\dz}{\mathop{dz}}
\newcommand{\dw}{\mathop{dw}}
\newcommand{\dr}{\mathop{dr}}
\newcommand{\dt}{\mathop{dt}}
\newcommand{\du}{\mathop{du}}
\newcommand{\dv}{\mathop{dv}}
\newcommand{\drho}{\mathop{d\rho}}
\newcommand{\dtau}{\mathop{d\tau}}
\newcommand{\dphi}{\mathop{d\phi}}
\newcommand{\dtheta}{\mathop{d\theta}}
%%\newcommand*\Diff[1]{\mathop{}\!\mathrm{d^#1}}
\newcommand{\diff}{\, d}
\renewcommand{\dfrac}[2]{\frac{\diff #1}{\diff #2}}
\newcommand{\pfrac}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\ppfrac}[3][]{\left.\frac{\partial #2}{\partial #3}\right\rvert_{#1}}
%\renewcommand{\vec}[1]{\overrightarrow{#1}}
\renewcommand{\vec}[1]{\underline{\mathbf{#1}}}
\DeclareRobustCommand*\cal{\@fontswitch\relax\mathcal}
\newcommand{\pnk}{\PR_k^n}
\newcommand{\pmk}{\PR_k^m}
\newcommand{\ank}{\A_k^n}
\newcommand{\amk}{\A_k^m}
\newcommand{\opnd}{\cO_{\PR^n}(d)}
\newcommand{\proves}{\vdash}

\delimitershortfall-1sp

\let\originalleft\left
\let\originalright\right
\renewcommand{\left}{\mathopen{}\mathclose\bgroup\originalleft}
\renewcommand{\right}{\aftergroup\egroup\originalright}

\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1 \right\rceil}
\newcommand{\abs}[1]{\left\lvert #1 \right\rvert}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\parr}[1]{\left( #1 \right)}
\newcommand{\geng}[1]{\left\langle #1 \right\rangle}
\newcommand{\set}[1]{\left\{ #1 \right\}}
\newcommand{\sbra}[1]{\left[ #1 \right]}

\renewcommand{\qedsymbol}{$\blacksquare$}

\newenvironment{proof2}{
\renewcommand{\qedsymbol}{$\square$}
\begin{proof}
}
{
\end{proof}
\renewcommand{\qedsymbol}{$\blacksquare$}
}

\RequirePackage{enumitem}
\newenvironment{enumeratea}{%
\begin{enumerate}[label={\alph*)}]
}
{
\end{enumerate}
}

\newenvironment{romanlist}{%
\begin{enumerate}[label={\roman*)}]
}
{
\end{enumerate}
}

\renewcommand{\labelenumi}{\arabic{enumi})}
\renewcommand{\labelenumii}{\labelenumi\alph{enumii})}
\renewcommand{\labelenumiii}{\labelenumii\roman{enumiii})}

\newenvironment{del}{
\renewcommand{\qedsymbol}{}
}
{

}
	

\RequirePackage{etoolbox}
%%%%%%%% resetter countere etter teoremer
\AtBeginEnvironment{proof}{\setcounter{case}{0}}

\RequirePackage{graphicx}
\newcommand{\bilde}[2][]{\begin{center} \includegraphics[#1]{#2} \end{center}}

\RequirePackage{epigraph}

% \epigraphsize{\small}% Default
\setlength\epigraphwidth{8cm}
\setlength\epigraphrule{0pt}
\patchcmd{\epigraph}{\@epitext{#1}}{\itshape\@epitext{#1}}{}{}




\RequirePackage{hyperref}
\hypersetup{colorlinks = true}
\definecolor{url}{HTML}{191970}%%1f7bca
\definecolor{cite}{HTML}{191970}
	\hypersetup{
    	linkbordercolor = {white},
    	linkcolor = {magenta},% used to be magenta, or blue!27!black. I think url is best, but el prefers magenta. So we compromised, and went for magenta.
    	citecolor =  {cite},
    	urlcolor = {url},
	}
